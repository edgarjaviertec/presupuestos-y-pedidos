var positiveDecimalRegex=/^\d*[.]?\d{0,2}$/,positiveIntegerRegex=/^\d*$/,IVA=16;Handlebars.registerHelper("dmyDate",(function(e){return e.split("-").reverse().join("/")})),Handlebars.registerHelper("switch",(function(e,a){this._switch_value_=e;var t=a.fn(this);return delete this._switch_value_,t})),Handlebars.registerHelper("case",(function(e,a){if(e==this._switch_value_)return a.fn(this)})),Handlebars.registerHelper("currencyFormat",(function(e){var a=e;return(a=parseFloat(a)).toLocaleString("en-US",{style:"currency",currency:"USD"})})),$(document).ready((function(){new Pikaday({field:$("#newPaymentModal input.date-picker")[0],firstDay:1,position:"bottom center",format:"D/M/YYYY",toString:(e,a)=>dmyFormat(e),parse:(e,a)=>parseDmyDate(e),onSelect(e){$('#newPaymentModal input[name="date"]').val(ymdFormat(dmyFormat(e)))},i18n:pikadaySpanishLanguage}),$("#newPaymentModal input.amount").off(),$("#newPaymentModal input.amount").inputFilter((function(e){return positiveDecimalRegex.test(e)&&(""===e||parseFloat(e)<=1e6)})),$("#newPaymentModal").on("show.bs.modal",(function(e){$("#newPaymentModal input").each((function(e){$(this).removeClass("is-invalid")})),$("#newPaymentModal .invalid-feedback").remove();var a=$("#amountDue"),t=isEmpty(a.val())?"":parseFloat(a.val());$("#newPaymentModal input.amount").val(t),$("#newPaymentModal select.payment_method").val("cash"),$("#newPaymentModal input.date-picker").val(dmyFormat(new Date)),$("#newPaymentModal textarea.notes").val("")})),$("body").on("click","#newPaymentModal .submit-btn",(function(e){$("#newPaymentModal input").removeClass("is-invalid"),$("#newPaymentModal .invalid-feedback").remove();var a=0,t=$("#orderId"),n=$("#customerId"),o=isEmpty(t.val())?0:t.val(),l=isEmpty(n.val())?0:n.val(),i=$("#newPaymentModal input.amount"),s=$("#newPaymentModal select.payment-method"),r=$("#newPaymentModal input.date"),m=$("#newPaymentModal textarea.notes");if(""==i.val())return i.addClass("is-invalid"),$('<div class="invalid-feedback">Campo requerido</div>').insertAfter(i),!1;if(i.val()<=0)return i.addClass("is-invalid"),$('<div class="invalid-feedback">El monto debe ser mayor a 0</div>').insertAfter(i),!1;var d=getPaymentsMade();d.forEach((function(e){a=parseFloat(a)+parseFloat(e.amount)}));var p=isEmpty(r.val())?0:r.val(),y=isEmpty(s.val())?0:s.val(),v=isEmpty(m.val())?0:m.val(),u=isEmpty(i.val())?0:i.val();d.push({date:p,type:y,notes:v,amount:u,order_id:o,customer_id:l});var c={total_paid:a=parseFloat(a)+parseFloat(u)};if(c.payments_made=d,$("#totalPaid").val(a),updateSummary(),c.payments_made.length>0){var f=$("#paymentTpl").html(),h=Handlebars.compile(f)(c);$("#paymentsContainer").html(h),$("#noPayments").addClass("d-none"),$("#paymentsContainer").removeClass("d-none")}else{$("#paymentsContainer").html(""),$("#noPayments").removeClass("d-none"),$("#paymentsContainer").addClass("d-none")}$("#newPaymentModal").modal("hide")})),$("body").on("click","#paymentsContainer .remove-payment-btn",(function(e){e.preventDefault(),$(this).closest(".payment").remove();var a=0,t=getPaymentsMade();t.forEach((function(e){a=parseFloat(a)+parseFloat(e.amount)}));var n={total_paid:a};if(n.payments_made=t,$("#totalPaid").val(a),updateSummary(),n.payments_made.length>0){var o=$("#paymentTpl").html(),l=Handlebars.compile(o)(n);$("#paymentsContainer").html(l),$("#noPayments").addClass("d-none"),$("#paymentsContainer").removeClass("d-none")}else{$("#paymentsContainer").html(""),$("#noPayments").removeClass("d-none"),$("#paymentsContainer").addClass("d-none")}}))}));
//# sourceMappingURL=payments.min.js.map